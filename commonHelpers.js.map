{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45110069-9beca970d71a92a84c606c316';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  try {\n    const response = await axios.get(url);\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      image => `\n    <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      <div class=\"info\">\n        <p class=\"info-item\"><strong>Likes:</strong> ${image.likes}</p>\n        <p class=\"info-item\"><strong>Views:</strong> ${image.views}</p>\n        <p class=\"info-item\"><strong>Comments:</strong> ${image.comments}</p>\n        <p class=\"info-item\"><strong>Downloads:</strong> ${image.downloads}</p>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function showAlert(message, type = 'info') {\n  iziToast[type]({\n    title: message,\n    position: 'topRight',\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, showAlert, clearGallery } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('load-more-btn');\ndocument.body.appendChild(loadMoreBtn);\nloadMoreBtn.style.display = 'none';\n\nlet page = 1;\nlet query = '';\nlet simpleLightbox;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  query = e.target.elements.query.value.trim();\n  if (!query) {\n    showAlert('Please enter a search query!', 'error');\n    return;\n  }\n  page = 1;\n  clearGallery();\n  loadMoreBtn.style.display = 'none';\n  loader.style.display = 'block';\n\n  try {\n    const images = await fetchImages(query, page);\n    if (images.length === 0) {\n      showAlert(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'error'\n      );\n    } else {\n      renderImages(images);\n      simpleLightbox = new SimpleLightbox('.gallery a');\n      simpleLightbox.refresh();\n      loadMoreBtn.style.display = images.length === 15 ? 'block' : 'none';\n    }\n    \n  } catch (error) {\n    showAlert('An error occurred while fetching images!', 'error');\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  loader.style.display = 'block';\n\n  try {\n    const images = await fetchImages(query, page);\n    renderImages(images);\n    simpleLightbox.refresh();\n    if (images.length < 15) {\n      loadMoreBtn.style.display = 'none';\n      showAlert(\n        \"We're sorry, but you've reached the end of search results.\",\n        'info'\n      );\n    }\n\n  } catch (error) {\n    showAlert('An error occurred while fetching images!', 'error');\n  } finally {\n    loader.style.display = 'none';\n  }\n  \n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","error","renderImages","images","gallery","markup","image","clearGallery","showAlert","message","type","iziToast","form","loader","loadMoreBtn","simpleLightbox","e","SimpleLightbox"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAC1CG,CACD,CAAA,iEAAiEC,CAAI,aAAaC,CAAO,GAC1F,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,KAAK,IACtB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCbO,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACCG,GAAS;AAAA,eACAA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,uDAEDA,EAAM,KAAK;AAAA,uDACXA,EAAM,KAAK;AAAA,0DACRA,EAAM,QAAQ;AAAA,2DACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAIrE,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CAEO,SAASE,GAAe,CAC7B,SAAS,cAAc,UAAU,EAAE,UAAY,EACjD,CAEO,SAASC,EAAUC,EAASC,EAAO,OAAQ,CAChDC,EAASD,CAAI,EAAE,CACb,MAAOD,EACP,SAAU,UACd,CAAG,CACH,CC3BA,MAAMG,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,YAC1BA,EAAY,UAAU,IAAI,eAAe,EACzC,SAAS,KAAK,YAAYA,CAAW,EACrCA,EAAY,MAAM,QAAU,OAE5B,IAAIjB,EAAO,EACPD,EAAQ,GACRmB,EAEJH,EAAK,iBAAiB,SAAU,MAAMI,GAAK,CAGzC,GAFAA,EAAE,eAAc,EAChBpB,EAAQoB,EAAE,OAAO,SAAS,MAAM,MAAM,OAClC,CAACpB,EAAO,CACVY,EAAU,+BAAgC,OAAO,EACjD,MACD,CACDX,EAAO,EACPU,IACAO,EAAY,MAAM,QAAU,OAC5BD,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMV,EAAS,MAAMR,EAAYC,EAAOC,CAAI,EACxCM,EAAO,SAAW,EACpBK,EACE,2EACA,OACR,GAEMN,EAAaC,CAAM,EACnBY,EAAiB,IAAIE,EAAe,YAAY,EAChDF,EAAe,QAAO,EACtBD,EAAY,MAAM,QAAUX,EAAO,SAAW,GAAK,QAAU,OAGhE,MAAe,CACdK,EAAU,2CAA4C,OAAO,CACjE,QAAY,CACRK,EAAO,MAAM,QAAU,MACxB,CACH,CAAC,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAChDjB,GAAQ,EACRgB,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMV,EAAS,MAAMR,EAAYC,EAAOC,CAAI,EAC5CK,EAAaC,CAAM,EACnBY,EAAe,QAAO,EAClBZ,EAAO,OAAS,KAClBW,EAAY,MAAM,QAAU,OAC5BN,EACE,6DACA,MACR,EAGG,MAAe,CACdA,EAAU,2CAA4C,OAAO,CACjE,QAAY,CACRK,EAAO,MAAM,QAAU,MACxB,CAEH,CAAC"}